<!-- Set this_pages_navbar  -->












<!Doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/plugins/offcanvas.css"/>
    <link href="https://www.projectcalico.org/wp-content/themes/dante/css/font-awesome.min.css" rel="stylesheet">
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <script src="/js/script.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52125893-4', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Network Policy Resource (NetworkPolicy)</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="Network Policy Resource (NetworkPolicy)" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://docs.projectcalico.org/v3.0/reference/calicoctl/resources/networkpolicy" />
<meta property="og:url" content="https://docs.projectcalico.org/v3.0/reference/calicoctl/resources/networkpolicy" />
<script type="application/ld+json">
{"headline":"Network Policy Resource (NetworkPolicy)","@type":"WebPage","url":"https://docs.projectcalico.org/v3.0/reference/calicoctl/resources/networkpolicy","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <section>
      <nav id="toplevel-nav" class="navbar navbar-default navbar-static-top">
        <div class="container">
          <div class="navbar-header">
            <!-- Hamburger menu for mobile -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#tigera-navbar" aria-expanded="false" aria-controls="tigera-navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <!-- Left brand image -->
            <a class="navbar-brand" href="https://projectcalico.org/">
              <img alt="Brand" src="/images/brand.png">
            </a>
          </div>
          <div id="tigera-navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://projectcalico.org">Home</a></li>
              <li class="active"><a href="https://projectcalico.org/resources"><span>Resources</span></a>
                <ul>
                    <li><a href="/latest/getting-started/"><i class="fa fa-tachometer" aria-hidden="true"></i> &nbsp; Getting Started</a></li>
                    <li><a href=""><i class="fa fa-book" aria-hidden="true"></i> &nbsp; Documentation</a></li>
                    <!--<li><a href="https://www.projectcalico.org/tutorials"><i class="fa fa-file-code-o" aria-hidden="true"></i> &nbsp; Tutorials &amp; Examples</a></li>
                    <li><a href=""><i class="fa fa-paper-plane-o" aria-hidden="true"></i> &nbsp; Online Workshops</a></li>-->
                    <li><a href="https://www.projectcalico.org/videos"><i class="fa fa-video-camera" aria-hidden="true"></i> &nbsp; Videos &amp; Webinars</a></li>
                    <li><a href="https://www.projectcalico.org/training"><i class="fa fa-graduation-cap" aria-hidden="true"></i> &nbsp; Training</a></li>
                    <li><a href="/latest/releases/"><i class="fa fa-clock-o" aria-hidden="true"></i> &nbsp; Releases</a></li>
                    <!-- <li><a href="/mvp"><i class="fa fa-star" aria-hidden="true"></i> &nbsp; MVP Program</a></li> -->
                    <li><a href="https://www.projectcalico.org/blog"><i class="fa fa-bookmark" aria-hidden="true"></i> &nbsp; Blog</a></li>
                </ul>
              </li>
              <li><a href="https://www.projectcalico.org/community">Community</a>
                <ul>
                    <li><a href="https://slack.projectcalico.org/"><i class="fa fa-slack" aria-hidden="true"></i> &nbsp; Slack</a></li>
                    <!--<li><a href="https://stackoverflow.com/questions/tagged/project-calico" target="_blank"><i class="fa fa-stack-overflow" aria-hidden="true"></i> &nbsp; StackOverflow</a></li>-->
                    <li><a href="https://www.projectcalico.org/mvp"><i class="fa fa-star" aria-hidden="true"></i> &nbsp; MVP Program</a></li>
                    <li><a href="https://www.projectcalico.org/community#events"><i class="fa fa-calendar" aria-hidden="true"></i> &nbsp; Upcoming Events</a></li>
                    <li><a href="https://www.projectcalico.org/newsletters"><i class="fa fa-envelope-o" aria-hidden="true"></i> &nbsp; Newsletter</a></li>
                    <li><a href="https://github.com/projectcalico" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> &nbsp; GitHub</a></li> 
                    <li><a href="https://www.projectcalico.org/jobs"><i class="fa fa-briefcase" aria-hidden="true"></i> &nbsp; Jobs</a></li>
                    <li><a href="https://www.projectcalico.org/blog"><i class="fa fa-bookmark" aria-hidden="true"></i> &nbsp; Blog</a></li>
                </ul>
              </li>
              <li><a href="https://www.projectcalico.org/mvp" style="font-weight: bold;">MVP</a></li>
              <li><a href="https://www.projectcalico.org/support">Support</a></li>
              <li class="hidden-xs"><a href="https://www.projectcalico.org/support">
                <img class="desktopImage" width="30" align="absmiddle" src="https://www.projectcalico.org/images/tigera_trans_sm.png" alt="Tigera"></a>
              </li>
            </ul>
            <form class="navbar-form visible-xs">
              <ul class="nav navbar-nav navbar-right">
                
                  <li >
                    <a href="/v3.0/introduction">Introduction</a>
                  </li>
                
                  <li >
                    <a href="/v3.0/getting-started">Getting Started</a>
                  </li>
                
                  <li >
                    <a href="/v3.0/usage">Usage</a>
                  </li>
                
                  <li  class="active">
                    <a href="/v3.0/reference">Reference</a>
                  </li>
                
                  <li >
                    <a href="/v3.0/releases">Releases</a>
                  </li>
                
              </ul>
            </form>
            <ul class="visible-xs nav navbar-nav navbar-right">
             <li class="dropdown">
               <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Version (v3.0)<span class="caret"></span></a>
               <ul class="dropdown-menu">
                 <li><a href="/v2.6/introduction">v2.6 (latest)</a></li>
                 <li><a href="/v2.5/introduction">v2.5</a></li>
                 <li><a href="/v2.4/introduction">v2.4</a></li>
                 <li><a href="/v2.3/introduction">v2.3</a></li>
                 <li><a href="/v2.2/introduction">v2.2</a></li>
                 <li><a href="/v2.1/introduction">v2.1</a></li>
                 <li><a href="/v2.0/introduction">v2.0</a></li>
                 <li><a href="/v1.6/introduction">v1.6</a></li>
                 <li><a href="/v1.5/introduction">v1.5</a></li>
                 <li><a href="/v3.0/introduction">v3.0 (beta)</a></li>
                 <li><a href="/master/introduction">nightly</a></li>
                 <li role="separator" class="divider"></li>
               </ul>
             </li>
           </ul>
          </div>
        </div>
        <div id="navbar" class="navbar-inverse navbar-collapse collapse">
          <div class="container">
            <ul class="nav navbar-nav">
              
                <li>
                  <a href="/v3.0/introduction"><span>Introduction</span></a>
                </li>
              
                <li>
                  <a href="/v3.0/getting-started"><span>Getting Started</span></a>
                </li>
              
                <li>
                  <a href="/v3.0/usage"><span>Usage</span></a>
                </li>
              
                <li class="active">
                  <a href="/v3.0/reference"><span>Reference</span></a>
                </li>
              
                <li>
                  <a href="/v3.0/releases"><span>Releases</span></a>
                </li>
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Version (v3.0)<span class="caret"></span></a>
                <ul class="dropdown-menu">
                   <li><a href="/v3.0/introduction">v3.0 (latest)</a></li>
                   <li><a href="/v2.6/introduction">v2.6</a></li>
                   <li><a href="/v2.5/introduction">v2.5</a></li>
                   <li><a href="/v2.4/introduction">v2.4</a></li>
                   <li><a href="/v2.3/introduction">v2.3</a></li>
                   <li><a href="/v2.2/introduction">v2.2</a></li>
                   <li><a href="/v2.1/introduction">v2.1</a></li>
                   <li><a href="/v2.0/introduction">v2.0</a></li>
                   <li><a href="/v1.6/introduction">v1.6</a></li>
                   <li><a href="/v1.5/introduction">v1.5</a></li>
                  <li role="separator" class="divider"></li>
                  <li><a href="/master/introduction">nightly</a></li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="row">
            <div class="col-sm-0"></div>
          </div>
        </div>
      </nav>
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-left">
          <p class="pull-left visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          <div class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
            <div class="row">
              <script>
                (function() {
                  var cx = '015028447179048192876:xjzskk7awwe';
                  var gcse = document.createElement('script');
                  gcse.type = 'text/javascript';
                  gcse.async = true;
                  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                  var s = document.getElementsByTagName('script')[0];
                  s.parentNode.insertBefore(gcse, s);
                })();
              </script>
              <gcse:search></gcse:search>
            </div>
            <div id="sidebar">
            	

  
    
    
    <div class="link">
      <a class="item" data-title="Reference" href="/v3.0/reference/">
        Reference
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-calicoctl" aria-expanded="false" aria-controls="nav-calicoctl">
          calicoctl
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-calicoctl">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/reference/calicoctl/">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-calicoctl-commandreference" aria-expanded="false" aria-controls="nav-calicoctl-commandreference">
          Command Reference
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-calicoctl-commandreference">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/reference/calicoctl/commands/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="get" href="/v3.0/reference/calicoctl/commands/get">
        get
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="create" href="/v3.0/reference/calicoctl/commands/create">
        create
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="replace" href="/v3.0/reference/calicoctl/commands/replace">
        replace
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="apply" href="/v3.0/reference/calicoctl/commands/apply">
        apply
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="delete" href="/v3.0/reference/calicoctl/commands/delete">
        delete
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="convert" href="/v3.0/reference/calicoctl/commands/convert">
        convert
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-calicoctl-commandreference-ipam" aria-expanded="false" aria-controls="nav-calicoctl-commandreference-ipam">
          ipam
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-calicoctl-commandreference-ipam">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/reference/calicoctl/commands/ipam/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="release" href="/v3.0/reference/calicoctl/commands/ipam/release">
        release
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="show" href="/v3.0/reference/calicoctl/commands/ipam/show">
        show
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-calicoctl-commandreference-node" aria-expanded="false" aria-controls="nav-calicoctl-commandreference-node">
          node
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-calicoctl-commandreference-node">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/reference/calicoctl/commands/node/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="run" href="/v3.0/reference/calicoctl/commands/node/run">
        run
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="status" href="/v3.0/reference/calicoctl/commands/node/status">
        status
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="diags" href="/v3.0/reference/calicoctl/commands/node/diags">
        diags
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="checksystem" href="/v3.0/reference/calicoctl/commands/node/checksystem">
        checksystem
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="version" href="/v3.0/reference/calicoctl/commands/version">
        version
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-calicoctl-resourcedefinitions" aria-expanded="false" aria-controls="nav-calicoctl-resourcedefinitions">
          Resource Definitions
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-calicoctl-resourcedefinitions">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/reference/calicoctl/resources/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="BGP Peer" href="/v3.0/reference/calicoctl/resources/bgppeer">
        BGP Peer
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="BGP Configuration" href="/v3.0/reference/calicoctl/resources/bgpconfig">
        BGP Configuration
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Felix Configuration" href="/v3.0/reference/calicoctl/resources/felixconfig">
        Felix Configuration
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Host Endpoint" href="/v3.0/reference/calicoctl/resources/hostendpoint">
        Host Endpoint
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="IP Pool" href="/v3.0/reference/calicoctl/resources/ippool">
        IP Pool
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Node" href="/v3.0/reference/calicoctl/resources/node">
        Node
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Network Policy" href="/v3.0/reference/calicoctl/resources/networkpolicy">
        Network Policy
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Global Network Policy" href="/v3.0/reference/calicoctl/resources/globalnetworkpolicy">
        Global Network Policy
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Profile" href="/v3.0/reference/calicoctl/resources/profile">
        Profile
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Workload Endpoint" href="/v3.0/reference/calicoctl/resources/workloadendpoint">
        Workload Endpoint
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-caliconode" aria-expanded="false" aria-controls="nav-caliconode">
          calico/node
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-caliconode">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Configuration" href="/v3.0/reference/node/configuration">
        Configuration
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-felix" aria-expanded="false" aria-controls="nav-felix">
          felix
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-felix">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Configuration" href="/v3.0/reference/felix/configuration">
        Configuration
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Prometheus Statistics" href="/v3.0/reference/felix/prometheus">
        Prometheus Statistics
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Calico CNI Plugins" href="/v3.0/reference/cni-plugin/configuration">
        Calico CNI Plugins
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Calico Kubernetes Controllers" href="/v3.0/reference/kube-controllers/configuration">
        Calico Kubernetes Controllers
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-deployingonpubliccloud" aria-expanded="false" aria-controls="nav-deployingonpubliccloud">
          Deploying on Public Cloud
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-deployingonpubliccloud">
          

  
    
    
    <div class="link">
      <a class="item" data-title="AWS" href="/v3.0/reference/public-cloud/aws">
        AWS
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Azure" href="/v3.0/reference/public-cloud/azure">
        Azure
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="GCE" href="/v3.0/reference/public-cloud/gce">
        GCE
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-deployingonprivatecloud" aria-expanded="false" aria-controls="nav-deployingonprivatecloud">
          Deploying on Private Cloud
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-deployingonprivatecloud">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Calico Over Ethernet Fabrics" href="/v3.0/reference/private-cloud/l2-interconnect-fabric">
        Calico Over Ethernet Fabrics
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Calico Over IP Fabrics" href="/v3.0/reference/private-cloud/l3-interconnect-fabric">
        Calico Over IP Fabrics
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-architecture" aria-expanded="false" aria-controls="nav-architecture">
          Architecture
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-architecture">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Introduction" href="/v3.0/reference/architecture/">
        Introduction
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="calico/node" href="/v3.0/reference/architecture/components">
        calico/node
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Data Path" href="/v3.0/reference/architecture/data-path">
        Data Path
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-advanced" aria-expanded="false" aria-controls="nav-advanced">
          Advanced
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-advanced">
          

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-advanced-configuringetcdrbac" aria-expanded="false" aria-controls="nav-advanced-configuringetcdrbac">
          Configuring etcd RBAC
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-advanced-configuringetcdrbac">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/reference/advanced/etcd-rbac/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Certificate Generation" href="/v3.0/reference/advanced/etcd-rbac/certificate-generation">
        Certificate Generation
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="User and Role Creations" href="/v3.0/reference/advanced/etcd-rbac/users-and-roles">
        User and Role Creations
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Kubernetes" href="/v3.0/reference/advanced/etcd-rbac/kubernetes">
        Kubernetes
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Advanced Kubernetes" href="/v3.0/reference/advanced/etcd-rbac/kubernetes-advanced">
        Advanced Kubernetes
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Etcd paths for Calico components" href="/v3.0/reference/advanced/etcd-rbac/calico-etcdv3-paths">
        Etcd paths for Calico components
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="System Requirements" href="/v3.0/reference/requirements">
        System Requirements
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Repo Structure" href="/v3.0/reference/repo-structure">
        Repo Structure
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Get Involved" href="/v3.0/reference/involved">
        Get Involved
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="License" href="/v3.0/reference/license">
        License
      </a>
    </div>
  


			</div>
          </div>
          <div class="col-xs-12 col-sm-8 col-md-9">
            <div id="content-main">
              <!-- TOP DOCUMENTATION PAGE NAVBAR -->
              <div style="text-align: left; padding: 18px 0 9px 0; min-width: 500px; overflow-x: hidden;">
              
              <a data-proofer-ignore href="https://github.com/projectcalico/calico/tree/master/v3.0/reference/calicoctl/resources/networkpolicy.md" style="color: #999; text-decoration: none; float: right;" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit this page</a></div>
              <!-- END TOP DOCUMENTATION PAGE NAVBAR -->
              

              <h1>Network Policy Resource (NetworkPolicy)</h1>
              <p>A network policy resource (<code class="highlighter-rouge">NetworkPolicy</code>) represents an ordered set of rules which are applied
to a collection of endpoints that match a <a href="#selector">label selector</a>.</p>

<p><code class="highlighter-rouge">NetworkPolicy</code> is a namespaced resource. <code class="highlighter-rouge">NetworkPolicy</code> in a specific namespace
only applies to <a href="/v3.0/reference/calicoctl/resources/workloadendpoint">workload endpoint resources</a>
in that namespace. Two resources are in the same namespace if the namespace
value is set the same on both.
See <a href="/v3.0/reference/calicoctl/resources/globalnetworkpolicy">global network policy resource</a> for non-namespaced network policy.</p>

<p><code class="highlighter-rouge">NetworkPolicy</code> resources can be used to define network connectivity rules between groups of Calico endpoints and host endpoints, and
take precedence over <a href="/v3.0/reference/calicoctl/resources/profile">profile resources</a> if any are defined.</p>

<p>For <code class="highlighter-rouge">calicoctl</code> <a href="/v3.0/reference/calicoctl/commands/">commands</a> that specify a resource type on the CLI, the following
aliases are supported (all case insensitive): <code class="highlighter-rouge">networkpolicy</code>, <code class="highlighter-rouge">networkpolicies</code>, <code class="highlighter-rouge">policy</code>, <code class="highlighter-rouge">np</code>, <code class="highlighter-rouge">policies</code>, <code class="highlighter-rouge">pol</code>, <code class="highlighter-rouge">pols</code>.</p>

<h3 id="sample-yaml">Sample YAML</h3>

<p>This sample policy allows TCP traffic from <code class="highlighter-rouge">frontend</code> endpoints to port 6379 on
<code class="highlighter-rouge">database</code> endpoints.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">projectcalico.org/v3</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">NetworkPolicy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">allow-tcp-6379</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">production</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span> <span class="s">role == 'database'</span>
  <span class="na">types</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Ingress</span>
  <span class="pi">-</span> <span class="s">Egress</span>
  <span class="na">ingress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">Allow</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
    <span class="na">source</span><span class="pi">:</span>
      <span class="na">selector</span><span class="pi">:</span> <span class="s">role == 'frontend'</span>
    <span class="na">destination</span><span class="pi">:</span>
      <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">6379</span>
  <span class="na">egress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">Allow</span>
</code></pre></div></div>

<h3 id="definition">Definition</h3>

<h4 id="metadata">Metadata</h4>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
      <th>Accepted Values</th>
      <th>Schema</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>name</td>
      <td>The name of the network policy. Required.</td>
      <td>Alphanumeric string with optional <code class="highlighter-rouge">.</code>, <code class="highlighter-rouge">_</code>, or <code class="highlighter-rouge">-</code>.</td>
      <td>string</td>
      <td> </td>
    </tr>
    <tr>
      <td>namespace</td>
      <td>Namespace provides an additional qualification to a resource name.</td>
      <td> </td>
      <td>map</td>
      <td>“default”</td>
    </tr>
  </tbody>
</table>

<h4 id="spec">Spec</h4>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
      <th>Accepted Values</th>
      <th>Schema</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order</td>
      <td>Controls the order of precedence. Calico applies the policy with the lowest value first.</td>
      <td> </td>
      <td>float</td>
      <td> </td>
    </tr>
    <tr>
      <td>selector</td>
      <td>Selects the endpoints to which this policy applies.</td>
      <td> </td>
      <td><a href="#selector">selector</a></td>
      <td>all()</td>
    </tr>
    <tr>
      <td>types</td>
      <td>Applies the policy based on the direction of the traffic. To apply the policy to inbound traffic, set to <code class="highlighter-rouge">ingress</code>. To apply the policy to outbound traffic, set to <code class="highlighter-rouge">egress</code>. To apply the policy to both, set to <code class="highlighter-rouge">ingress, egress</code>.</td>
      <td><code class="highlighter-rouge">ingress</code>, <code class="highlighter-rouge">egress</code></td>
      <td>List of strings</td>
      <td>Depends on presence of ingress/egress rules*</td>
    </tr>
    <tr>
      <td>ingress</td>
      <td>Ordered list of ingress rules applied by policy.</td>
      <td> </td>
      <td>List of <a href="#rule">Rule</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>egress</td>
      <td>Ordered list of egress rules applied by this policy.</td>
      <td> </td>
      <td>List of <a href="#rule">Rule</a></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>* If <code class="highlighter-rouge">types</code> has no value, Calico defaults as follows.</p>

<blockquote>
  <table>
    <thead>
      <tr>
        <th>Ingress Rules Present</th>
        <th>Egress Rules Present</th>
        <th><code class="highlighter-rouge">Types</code> value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>No</td>
        <td>No</td>
        <td><code class="highlighter-rouge">ingress</code></td>
      </tr>
      <tr>
        <td>Yes</td>
        <td>No</td>
        <td><code class="highlighter-rouge">ingress</code></td>
      </tr>
      <tr>
        <td>No</td>
        <td>Yes</td>
        <td><code class="highlighter-rouge">egress</code></td>
      </tr>
      <tr>
        <td>Yes</td>
        <td>Yes</td>
        <td><code class="highlighter-rouge">ingress, egress</code></td>
      </tr>
    </tbody>
  </table>
</blockquote>

<h4 id="rule">Rule</h4>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
      <th>Accepted Values</th>
      <th>Schema</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>action</td>
      <td>Action to perform when matching this rule.</td>
      <td><code class="highlighter-rouge">Allow</code>, <code class="highlighter-rouge">Deny</code>, <code class="highlighter-rouge">Log</code>, <code class="highlighter-rouge">Pass</code></td>
      <td>string</td>
      <td> </td>
    </tr>
    <tr>
      <td>protocol</td>
      <td>Positive protocol match.</td>
      <td><code class="highlighter-rouge">TCP</code>, <code class="highlighter-rouge">UDP</code>, <code class="highlighter-rouge">ICMP</code>, <code class="highlighter-rouge">ICMPv6</code>, <code class="highlighter-rouge">SCTP</code>, <code class="highlighter-rouge">UDPLite</code>, <code class="highlighter-rouge">1</code>-<code class="highlighter-rouge">255</code></td>
      <td>string | integer</td>
      <td> </td>
    </tr>
    <tr>
      <td>notProtocol</td>
      <td>Negative protocol match.</td>
      <td><code class="highlighter-rouge">TCP</code>, <code class="highlighter-rouge">UDP</code>, <code class="highlighter-rouge">ICMP</code>, <code class="highlighter-rouge">ICMPv6</code>, <code class="highlighter-rouge">SCTP</code>, <code class="highlighter-rouge">UDPLite</code>, <code class="highlighter-rouge">1</code>-<code class="highlighter-rouge">255</code></td>
      <td>string | integer</td>
      <td> </td>
    </tr>
    <tr>
      <td>icmp</td>
      <td>ICMP match criteria.</td>
      <td> </td>
      <td><a href="#icmp">ICMP</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>notICMP</td>
      <td>Negative match on ICMP.</td>
      <td> </td>
      <td><a href="#icmp">ICMP</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>source</td>
      <td>Source match parameters.</td>
      <td> </td>
      <td><a href="#entityrule">EntityRule</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>destination</td>
      <td>Destination match parameters.</td>
      <td> </td>
      <td><a href="#entityrule">EntityRule</a></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>An <code class="highlighter-rouge">action</code> of <code class="highlighter-rouge">Pass</code> will skip over the remaining policies and jump to the
first <a href="/v3.0/reference/calicoctl/resources/profile">profile</a> assigned to the endpoint, applying the policy configured in the
profile; if there are no Profiles configured for the endpoint the default
applied action is <code class="highlighter-rouge">Deny</code>.</p>

<h4 id="icmp">ICMP</h4>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
      <th>Accepted Values</th>
      <th>Schema</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>Match on ICMP type.</td>
      <td>Can be integer 0-254</td>
      <td>integer</td>
      <td> </td>
    </tr>
    <tr>
      <td>code</td>
      <td>Match on ICMP code.</td>
      <td>Can be integer 0-255</td>
      <td>integer</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="entityrule">EntityRule</h4>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
      <th>Accepted Values</th>
      <th>Schema</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>nets</td>
      <td>Match packets with IP in any of the listed CIDRs.</td>
      <td>List of valid IPv4 or IPv6 CIDRs</td>
      <td>list of cidrs</td>
      <td> </td>
    </tr>
    <tr>
      <td>notNets</td>
      <td>Negative match on CIDRs. Match packets with IP not in any of the listed CIDRs.</td>
      <td>List of valid IPv4 or IPv6 CIDRs</td>
      <td>list of cidrs</td>
      <td> </td>
    </tr>
    <tr>
      <td>selector</td>
      <td>Positive match on selected endpoints. If a <code class="highlighter-rouge">namespaceSelector</code> is also defined, the set of endpoints this applies to is limited to the endpoints in the selected namespaces.</td>
      <td>Valid selector</td>
      <td><a href="#selector">selector</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>notSelector</td>
      <td>Negative match on selected endpoints. If a <code class="highlighter-rouge">namespaceSelector</code> is also defined, the set of endpoints this applies to is limited to the endpoints in the selected namespaces.</td>
      <td>Valid selector</td>
      <td><a href="#selector">selector</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>namespaceSelector</td>
      <td>Positive match on selected namespaces. If specified, only workload endpoints in the selected Kubernetes namespaces are matched. Matches namespaces based on the labels that have been applied to the namespaces. Defines the context that selectors will apply to, if not defined then selectors apply to the NetworkPolicy’s namespace.</td>
      <td>Valid selector</td>
      <td><a href="#selector">selector</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>ports</td>
      <td>Positive match on the specified ports</td>
      <td> </td>
      <td>list of <a href="#ports">ports</a></td>
      <td> </td>
    </tr>
    <tr>
      <td>notPorts</td>
      <td>Negative match on the specified ports</td>
      <td> </td>
      <td>list of <a href="#ports">ports</a></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="selector">Selector</h4>

<p>A label selector is an expression which either matches or does not match a resource based on its labels.</p>

<p>Calico label selectors support a number of syntactic primitives.  Each of the following
primitive expressions can be combined using the logical operator <code class="highlighter-rouge">&amp;&amp;</code>.</p>

<table>
  <thead>
    <tr>
      <th>Syntax</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>all()</td>
      <td>Match all resources.</td>
    </tr>
    <tr>
      <td>k == ‘v’</td>
      <td>Matches any resource with the label ‘k’ and value ‘v’.</td>
    </tr>
    <tr>
      <td>k != ‘v’</td>
      <td>Matches any resource with the label ‘k’ and value that is <em>not</em> ‘v’.</td>
    </tr>
    <tr>
      <td>has(k)</td>
      <td>Matches any resource with label ‘k’, independent of value.</td>
    </tr>
    <tr>
      <td>!has(k)</td>
      <td>Matches any resource that does not have label ‘k’</td>
    </tr>
    <tr>
      <td>k in { ‘v1’, ‘v2’ }</td>
      <td>Matches any resource with label ‘k’ and value in the given set</td>
    </tr>
    <tr>
      <td>k not in { ‘v1’, ‘v2’ }</td>
      <td>Matches any resource without label ‘k’ or any with label ‘k’ and value <em>not</em> in the given set</td>
    </tr>
  </tbody>
</table>

<h4 id="ports">Ports</h4>

<p>Calico supports the following syntaxes for expressing ports.</p>

<table>
  <thead>
    <tr>
      <th>Syntax</th>
      <th>Example</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int</td>
      <td>80</td>
      <td>The exact (numeric) port specified</td>
    </tr>
    <tr>
      <td>start:end</td>
      <td>6040:6050</td>
      <td>All (numeric) ports within the range start &lt;= x &lt;= end</td>
    </tr>
    <tr>
      <td>string</td>
      <td>named-port</td>
      <td>A named port, as defined in the ports list of one or more endpoints</td>
    </tr>
  </tbody>
</table>

<p>An individual numeric port may be specified as a YAML/JSON integer.  A port range or
named port must be represented as as a string.  For example, this would be a valid list of ports:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ports</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">8080</span><span class="pi">,</span> <span class="s2">"</span><span class="s">1234:5678"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">named-port"</span><span class="pi">]</span>
</code></pre></div></div>

<h5 id="named-ports">Named ports</h5>

<p>Using a named port in an <code class="highlighter-rouge">EntityRule</code>, instead of a numeric port, gives a layer of indirection, 
allowing for the named port to map to different numeric values for each endpoint.</p>

<p>For example, suppose you have multiple HTTP servers running as workloads; some exposing their HTTP 
port on port 80 and others on port 8080. In each workload, you could create a named port called 
<code class="highlighter-rouge">http-port</code> that maps to the correct local port.  Then, in a rule, you could refer to the name 
<code class="highlighter-rouge">http-port</code> instead of writing a different rule for each type of server.</p>

<blockquote class="alert alert-info">
  <p><strong>NOTE</strong>: Since each named port may refer to many endpoints (and Calico has to expand a named port into
a set of endpoint/port combinations), using a named port is considerably more expensive in terms 
of CPU than using a simple numeric port.  We recommend that they are used sparingly, only where 
the extra indirection is required.</p>
</blockquote>

<h3 id="supported-operations">Supported operations</h3>

<table>
  <thead>
    <tr>
      <th>Datastore type</th>
      <th>Create/Delete</th>
      <th>Update</th>
      <th>Get/List</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>etcdv3</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td> </td>
    </tr>
    <tr>
      <td>Kubernetes API datastore</td>
      <td>No</td>
      <td>No</td>
      <td>Yes</td>
      <td><code class="highlighter-rouge">NetworkPolicy</code> is determined from Kubernetes <code class="highlighter-rouge">NetworkPolicy</code> resources.</td>
    </tr>
  </tbody>
</table>

              
              <!-- BOTTOM DOCUMENTATION PAGE NAVBAR -->
              <div style="margin-top: 60px; margin-bottom: 40px; padding-top: 20px; border-top: 1px solid #999; text-align: left; color: #999;">Rate this Page: <div class="rw-ui-container" style="margin-top: -5px;"></div> <a href="https://www.projectcalico.org/contact?type=docs&file=v3.0/reference/calicoctl/resources/networkpolicy.md" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i> Provide Feedback</a> <a href="https://www.projectcalico.org/community#slack" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-slack" aria-hidden="true"></i> Get Help via Slack</a> <a href="https://www.projectcalico.org/mvp" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-trophy" aria-hidden="true"></i> Ask our MVPs</a> <a href="https:/tigera.io/training" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Training</a></div>
              <!-- END BOTTOM DOCUMENTATION PAGE NAVBAR -->
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Start Visual Website Optimizer Asynchronous Code -->
    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=287573,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=false,
      /* DO NOT EDIT BELOW THIS LINE */
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>
    <!-- End Visual Website Optimizer Asynchronous Code -->
    <!-- DOCUMENTATION RATING ANALYTICS -->
   <script type="text/javascript">(function(d, t, e, m){
    // Async Rating-Widget initialization.
    window.RW_Async_Init = function(){
        RW.init({
            huid: "368439",
            uid: "33da22c0dff384767b5074aaf10ebc50",
            source: "website",
            options: {
                "advanced": {
					"font": {
						"color": "#999999"
					},
                    "layout": {
                        "align": {
                            "hor": "left"
                        }
                    },
                    "text": {
                        "rateThis": "Rate this"
                    }
                },
				"label": {
					"background": "#FFFFFF"
				},
				"reVote": true,
				"showInfo": false,
				/*"showTooltip": false,*/
				"hideRecommendations": false,
				"showReport": false,
				"showLoader": false,
                "style": "oxygen",
                "isDummy": false
            } 
        });
        RW.render();
    };
        // Append Rating-Widget JavaScript library.
    var rw, s = d.getElementsByTagName(e)[0], id = "rw-js",
        l = d.location, ck = "Y" + t.getFullYear() + 
        "M" + t.getMonth() + "D" + t.getDate(), p = l.protocol,
        f = ((l.search.indexOf("DBG=") > -1) ? "" : ".min"),
        a = ("https:" == p ? "secure." + m + "js/" : "js." + m);
    if (d.getElementById(id)) return;              
    rw = d.createElement(e);
    rw.id = id; rw.async = true; rw.type = "text/javascript";
    rw.src = p + "//" + a + "external" + f + ".js?ck=" + ck;
    s.parentNode.insertBefore(rw, s);
    }(document, new Date(), "script", "rating-widget.com/"));</script>
    <!-- END DOCUMENTATION RATING ANALYTICS -->
  </body>
</html>
