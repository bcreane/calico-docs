<!-- Set this_pages_navbar  -->












<!Doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/plugins/offcanvas.css"/>
    <link href="https://www.projectcalico.org/wp-content/themes/dante/css/font-awesome.min.css" rel="stylesheet">
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <script src="/js/script.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52125893-4', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Deleting old data</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="Deleting old data" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://docs.projectcalico.org/v3.0/getting-started/kubernetes/upgrade/delete" />
<meta property="og:url" content="https://docs.projectcalico.org/v3.0/getting-started/kubernetes/upgrade/delete" />
<script type="application/ld+json">
{"headline":"Deleting old data","@type":"WebPage","url":"https://docs.projectcalico.org/v3.0/getting-started/kubernetes/upgrade/delete","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <section>
      <nav id="toplevel-nav" class="navbar navbar-default navbar-static-top">
        <div class="container">
          <div class="navbar-header">
            <!-- Hamburger menu for mobile -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#tigera-navbar" aria-expanded="false" aria-controls="tigera-navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <!-- Left brand image -->
            <a class="navbar-brand" href="https://projectcalico.org/">
              <img alt="Brand" src="/images/brand.png">
            </a>
          </div>
          <div id="tigera-navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://projectcalico.org">Home</a></li>
              <li class="active"><a href="https://projectcalico.org/resources"><span>Resources</span></a>
                <ul>
                    <li><a href="/latest/getting-started/"><i class="fa fa-tachometer" aria-hidden="true"></i> &nbsp; Getting Started</a></li>
                    <li><a href=""><i class="fa fa-book" aria-hidden="true"></i> &nbsp; Documentation</a></li>
                    <!--<li><a href="https://www.projectcalico.org/tutorials"><i class="fa fa-file-code-o" aria-hidden="true"></i> &nbsp; Tutorials &amp; Examples</a></li>
                    <li><a href=""><i class="fa fa-paper-plane-o" aria-hidden="true"></i> &nbsp; Online Workshops</a></li>-->
                    <li><a href="https://www.projectcalico.org/videos"><i class="fa fa-video-camera" aria-hidden="true"></i> &nbsp; Videos &amp; Webinars</a></li>
                    <li><a href="https://www.projectcalico.org/training"><i class="fa fa-graduation-cap" aria-hidden="true"></i> &nbsp; Training</a></li>
                    <li><a href="/latest/releases/"><i class="fa fa-clock-o" aria-hidden="true"></i> &nbsp; Releases</a></li>
                    <!-- <li><a href="/mvp"><i class="fa fa-star" aria-hidden="true"></i> &nbsp; MVP Program</a></li> -->
                    <li><a href="https://www.projectcalico.org/blog"><i class="fa fa-bookmark" aria-hidden="true"></i> &nbsp; Blog</a></li>
                </ul>
              </li>
              <li><a href="https://www.projectcalico.org/community">Community</a>
                <ul>
                    <li><a href="https://slack.projectcalico.org/"><i class="fa fa-slack" aria-hidden="true"></i> &nbsp; Slack</a></li>
                    <!--<li><a href="https://stackoverflow.com/questions/tagged/project-calico" target="_blank"><i class="fa fa-stack-overflow" aria-hidden="true"></i> &nbsp; StackOverflow</a></li>-->
                    <li><a href="https://www.projectcalico.org/mvp"><i class="fa fa-star" aria-hidden="true"></i> &nbsp; MVP Program</a></li>
                    <li><a href="https://www.projectcalico.org/community#events"><i class="fa fa-calendar" aria-hidden="true"></i> &nbsp; Upcoming Events</a></li>
                    <li><a href="https://www.projectcalico.org/newsletters"><i class="fa fa-envelope-o" aria-hidden="true"></i> &nbsp; Newsletter</a></li>
                    <li><a href="https://github.com/projectcalico" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> &nbsp; GitHub</a></li> 
                    <li><a href="https://www.projectcalico.org/jobs"><i class="fa fa-briefcase" aria-hidden="true"></i> &nbsp; Jobs</a></li>
                    <li><a href="https://www.projectcalico.org/blog"><i class="fa fa-bookmark" aria-hidden="true"></i> &nbsp; Blog</a></li>
                </ul>
              </li>
              <li><a href="https://www.projectcalico.org/mvp" style="font-weight: bold;">MVP</a></li>
              <li><a href="https://www.projectcalico.org/support">Support</a></li>
              <li class="hidden-xs"><a href="https://www.projectcalico.org/support">
                <img class="desktopImage" width="30" align="absmiddle" src="https://www.projectcalico.org/images/tigera_trans_sm.png" alt="Tigera"></a>
              </li>
            </ul>
            <form class="navbar-form visible-xs">
              <ul class="nav navbar-nav navbar-right">
                
                  <li >
                    <a href="/v3.0/introduction">Introduction</a>
                  </li>
                
                  <li  class="active">
                    <a href="/v3.0/getting-started">Getting Started</a>
                  </li>
                
                  <li >
                    <a href="/v3.0/usage">Usage</a>
                  </li>
                
                  <li >
                    <a href="/v3.0/reference">Reference</a>
                  </li>
                
                  <li >
                    <a href="/v3.0/releases">Releases</a>
                  </li>
                
              </ul>
            </form>
            <ul class="visible-xs nav navbar-nav navbar-right">
             <li class="dropdown">
               <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Version (v3.0)<span class="caret"></span></a>
               <ul class="dropdown-menu">
                 <li><a href="/v2.6/introduction">v2.6 (latest)</a></li>
                 <li><a href="/v2.5/introduction">v2.5</a></li>
                 <li><a href="/v2.4/introduction">v2.4</a></li>
                 <li><a href="/v2.3/introduction">v2.3</a></li>
                 <li><a href="/v2.2/introduction">v2.2</a></li>
                 <li><a href="/v2.1/introduction">v2.1</a></li>
                 <li><a href="/v2.0/introduction">v2.0</a></li>
                 <li><a href="/v1.6/introduction">v1.6</a></li>
                 <li><a href="/v1.5/introduction">v1.5</a></li>
                 <li><a href="/v3.0/introduction">v3.0 (beta)</a></li>
                 <li><a href="/master/introduction">nightly</a></li>
                 <li role="separator" class="divider"></li>
               </ul>
             </li>
           </ul>
          </div>
        </div>
        <div id="navbar" class="navbar-inverse navbar-collapse collapse">
          <div class="container">
            <ul class="nav navbar-nav">
              
                <li>
                  <a href="/v3.0/introduction"><span>Introduction</span></a>
                </li>
              
                <li class="active">
                  <a href="/v3.0/getting-started"><span>Getting Started</span></a>
                </li>
              
                <li>
                  <a href="/v3.0/usage"><span>Usage</span></a>
                </li>
              
                <li>
                  <a href="/v3.0/reference"><span>Reference</span></a>
                </li>
              
                <li>
                  <a href="/v3.0/releases"><span>Releases</span></a>
                </li>
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Version (v3.0)<span class="caret"></span></a>
                <ul class="dropdown-menu">
                   <li><a href="/v3.0/introduction">v3.0 (latest)</a></li>
                   <li><a href="/v2.6/introduction">v2.6</a></li>
                   <li><a href="/v2.5/introduction">v2.5</a></li>
                   <li><a href="/v2.4/introduction">v2.4</a></li>
                   <li><a href="/v2.3/introduction">v2.3</a></li>
                   <li><a href="/v2.2/introduction">v2.2</a></li>
                   <li><a href="/v2.1/introduction">v2.1</a></li>
                   <li><a href="/v2.0/introduction">v2.0</a></li>
                   <li><a href="/v1.6/introduction">v1.6</a></li>
                   <li><a href="/v1.5/introduction">v1.5</a></li>
                  <li role="separator" class="divider"></li>
                  <li><a href="/master/introduction">nightly</a></li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="row">
            <div class="col-sm-0"></div>
          </div>
        </div>
      </nav>
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-left">
          <p class="pull-left visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          <div class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
            <div class="row">
              <script>
                (function() {
                  var cx = '015028447179048192876:xjzskk7awwe';
                  var gcse = document.createElement('script');
                  gcse.type = 'text/javascript';
                  gcse.async = true;
                  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                  var s = document.getElementsByTagName('script')[0];
                  s.parentNode.insertBefore(gcse, s);
                })();
              </script>
              <gcse:search></gcse:search>
            </div>
            <div id="sidebar">
            	

  
    
    
    <div class="link">
      <a class="item" data-title="Getting Started with Calico" href="/v3.0/getting-started/">
        Getting Started with Calico
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes" aria-expanded="false" aria-controls="nav-kubernetes">
          Kubernetes
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Quickstart" href="/v3.0/getting-started/kubernetes/">
        Quickstart
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-installation" aria-expanded="false" aria-controls="nav-kubernetes-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Introduction" href="/v3.0/getting-started/kubernetes/installation/">
        Introduction
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-installation-hosted-viakubectl" aria-expanded="false" aria-controls="nav-kubernetes-installation-hosted-viakubectl">
          Hosted (via kubectl)
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-installation-hosted-viakubectl">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Introduction" href="/v3.0/getting-started/kubernetes/installation/hosted/">
        Introduction
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Standard Hosted Install" href="/v3.0/getting-started/kubernetes/installation/hosted/hosted">
        Standard Hosted Install
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Kubeadm Hosted Install" href="/v3.0/getting-started/kubernetes/installation/hosted/kubeadm/">
        Kubeadm Hosted Install
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Kubernetes Datastore Hosted Install" href="/v3.0/getting-started/kubernetes/installation/hosted/kubernetes-datastore/">
        Kubernetes Datastore Hosted Install
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Integration Guide" href="/v3.0/getting-started/kubernetes/installation/integration">
        Integration Guide
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="AWS" href="/v3.0/getting-started/kubernetes/installation/aws">
        AWS
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="GCE" href="/v3.0/getting-started/kubernetes/installation/gce">
        GCE
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Azure" href="/v3.0/getting-started/kubernetes/installation/azure">
        Azure
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Vagrant/VirtualBox: CoreOS" href="/v3.0/getting-started/kubernetes/installation/vagrant/">
        Vagrant/VirtualBox: CoreOS
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-tutorials" aria-expanded="false" aria-controls="nav-kubernetes-tutorials">
          Tutorials
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-tutorials">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Using calicoctl" href="/v3.0/getting-started/kubernetes/tutorials/using-calicoctl">
        Using calicoctl
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Simple Policy Demo" href="/v3.0/getting-started/kubernetes/tutorials/simple-policy">
        Simple Policy Demo
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Stars Policy Demo" href="/v3.0/getting-started/kubernetes/tutorials/stars-policy/">
        Stars Policy Demo
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Advanced network policy" href="/v3.0/getting-started/kubernetes/tutorials/advanced-policy">
        Advanced network policy
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Troubleshooting / FAQ" href="/v3.0/getting-started/kubernetes/troubleshooting">
        Troubleshooting / FAQ
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-upgrade" aria-expanded="false" aria-controls="nav-kubernetes-upgrade">
          Upgrade
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-upgrade">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/getting-started/kubernetes/upgrade/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Install and configure calico-upgrade" href="/v3.0/getting-started/kubernetes/upgrade/setup">
        Install and configure calico-upgrade
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Test the migration" href="/v3.0/getting-started/kubernetes/upgrade/test">
        Test the migration
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Migrate your data" href="/v3.0/getting-started/kubernetes/upgrade/migrate">
        Migrate your data
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Upgrade Calico" href="/v3.0/getting-started/kubernetes/upgrade/upgrade">
        Upgrade Calico
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Converting your calicoctl manifests" href="/v3.0/getting-started/kubernetes/upgrade/convert">
        Converting your calicoctl manifests
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Deleting old data" href="/v3.0/getting-started/kubernetes/upgrade/delete">
        Deleting old data
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Downgrading Calico" href="/v3.0/getting-started/kubernetes/upgrade/downgrade">
        Downgrading Calico
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-openshift" aria-expanded="false" aria-controls="nav-openshift">
          OpenShift
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-openshift">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Installation" href="/v3.0/getting-started/openshift/installation">
        Installation
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-hostprotection" aria-expanded="false" aria-controls="nav-hostprotection">
          Host Protection
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-hostprotection">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v3.0/getting-started/bare-metal/bare-metal">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-hostprotection-installation" aria-expanded="false" aria-controls="nav-hostprotection-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-hostprotection-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Installing Felix as a static binary" href="/v3.0/getting-started/bare-metal/bare-metal-install">
        Installing Felix as a static binary
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  


			</div>
          </div>
          <div class="col-xs-12 col-sm-8 col-md-9">
            <div id="content-main">
              <!-- TOP DOCUMENTATION PAGE NAVBAR -->
              <div style="text-align: left; padding: 18px 0 9px 0; min-width: 500px; overflow-x: hidden;">
              
              <a data-proofer-ignore href="https://github.com/projectcalico/calico/tree/master/v3.0/getting-started/kubernetes/upgrade/delete.md" style="color: #999; text-decoration: none; float: right;" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit this page</a></div>
              <!-- END TOP DOCUMENTATION PAGE NAVBAR -->
              

              <h1>Deleting old data</h1>
              <h2 id="about-deleting-old-calico-data">About deleting old Calico data</h2>

<p>You may need or wish to manually delete Calico data from your etcd datastore under the
following conditions.</p>

<ul>
  <li>
    <p><a href="#deleting-calico-data-from-etcdv2-after-a-successful-migration-and-upgrade"><strong>etcd</strong>: You succeeded in migrating your data and upgrading to Calico v3.0. After
running Calico for some time and experiencing no errors, you want to delete
the old Calico data from the etcdv2 datastore.</a></p>
  </li>
  <li>
    <p><a href="#deleting-calico-data-from-etcdv3-after-a-partial-migration"><strong>etcd</strong>: A data migration attempt failed partway through, leaving the etcdv3 datastore
with some, but not all of your etcvd2 data.</a></p>
  </li>
  <li>
    <p><a href="#deleting-calico-data-from-the-kubernetes-api-datastore-after-a-downgrade"><strong>Kubernetes API datastore</strong>: You are using the Kubernetes API datastore and upgraded 
to Calico v3.0 but then downgraded to v2.6.5. You want to clean the Calico v3.0 data out of
the Kubernetes API datastore. If you plan to attempt another upgrade to
Calico v3.0, this is required</a></p>
  </li>
</ul>

<h2 id="deleting-calico-data-from-etcdv2-after-a-successful-migration-and-upgrade">Deleting Calico data from etcdv2 after a successful migration and upgrade</h2>

<h3 id="prerequisite">Prerequisite</h3>

<p>This procedure requires etcdctl v3. The etcdctl tool is installed along with etcd. To install just etcdctl, <a href="https://github.com/coreos/etcd/releases">download the etcd release binary</a>, untar it, and extract the etcdctl binary.</p>

<h3 id="deleting-calico-data-from-etcdv2">Deleting Calico data from etcdv2</h3>

<blockquote class="alert alert-info">
  <p><strong>Note</strong>: You must pass the same options you 
<a href="/v3.0/getting-started/kubernetes/upgrade/setup#configuring-calico-upgrade-to-connect-to-the-etcdv2-datastore">configured <code class="highlighter-rouge">calico-upgrade</code> with</a> 
to etcdctl to achieve a connection. We include just the <code class="highlighter-rouge">--endpoint</code> flag in the
following commands. Depending on your etcd configuration, you may need to include
additional parameters in these commands. Refer to the 
<a href="https://github.com/coreos/etcd/blob/master/etcdctl/READMEv2.md">etcdctl documentation for etcdv2 datastores</a> 
for more information about the flags and environment variables.</p>
</blockquote>

<ol>
  <li>
    <p>Issue the following command to retrieve a list of all of the Calico keys.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>etcdctl --endpoint=&lt;etcdv2-hostname:port&gt; ls /calico --recursive
</code></pre></div>    </div>
  </li>
  <li>
    <p>Issue the following command to delete the Calico keys.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>etcdctl --endpoint=&lt;etcdv2-hostname:port&gt; rm /calico/ --recursive 
</code></pre></div>    </div>
  </li>
  <li>
    <p>Issue the following command to confirm that the Calico keys were deleted.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>etcdctl --endpoint=&lt;etcdv2-hostname:port&gt; ls /calico --recursive
</code></pre></div>    </div>

    <p>It should return <code class="highlighter-rouge">Error: 100: Key not found (/calico) [1186]</code>.</p>
  </li>
  <li>
    <p>Congratulations! You’ve cleaned Calico’s etcdv2 datastore of Calico
data.</p>
  </li>
</ol>

<h2 id="deleting-calico-data-from-etcdv3-after-a-partial-migration">Deleting Calico data from etcdv3 after a partial migration</h2>

<h3 id="prerequisites">Prerequisites</h3>

<p>This procedure requires etcdctl v3. The etcdctl tool is installed along with etcd. To install just etcdctl, <a href="https://github.com/coreos/etcd/releases">download the etcd release binary</a>, untar it, and extract the etcdctl binary.</p>

<h3 id="deleting-calico-data-from-etcdv3">Deleting Calico data from etcdv3</h3>

<blockquote class="alert alert-info">
  <p><strong>Note</strong>: You must pass the same options you 
<a href="/v3.0/getting-started/kubernetes/upgrade/setup#configuring-calico-upgrade-to-connect-to-the-etcdv3-cluster">configured <code class="highlighter-rouge">calico-upgrade</code> with</a> 
to etcdctl to achieve a connection. We include just the <code class="highlighter-rouge">--endpoints</code> flag in the
following commands. Depending on your etcd configuration, you may need to include
additional parameters in these commands or set environment variables. Refer to the 
<a href="https://github.com/coreos/etcd/blob/master/etcdctl/README.md">etcdctl documentation for etcdv3 datastores</a> 
for more information about the flags and environment variables.</p>
</blockquote>

<ol>
  <li>
    <p>Issue the following command to retrieve a list of all of the Calico keys.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ETCDCTL_API=3 etcdctl --endpoints=&lt;etcdv3-hostname:port&gt; get /calico/ --prefix --keys-only
</code></pre></div>    </div>
  </li>
  <li>
    <p>Issue the following command to delete the Calico keys.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ETCDCTL_API=3 etcdctl --endpoints=&lt;etcdv3-hostname:port&gt; del /calico/ --prefix 
</code></pre></div>    </div>

    <p>It returns the number of keys it deleted.</p>
  </li>
  <li>
    <p>Issue the following command to confirm that the Calico keys were deleted.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ETCDCTL_API=3 etcdctl --endpoints=&lt;etcdv3-hostname:port&gt; get /calico/ --prefix --keys-only
</code></pre></div>    </div>

    <p>It should return nothing.</p>
  </li>
  <li>
    <p>Congratulations! You’ve cleaned Calico’s etcdv3 datastore of Calico
data.</p>
  </li>
</ol>

<h3 id="next-steps">Next steps</h3>

<p>Return to <a href="/v3.0/getting-started/kubernetes/upgrade/migrate">Migrate your data</a>
to try again.</p>

<h2 id="deleting-calico-data-from-the-kubernetes-api-datastore-after-a-downgrade">Deleting Calico data from the Kubernetes API datastore after a downgrade</h2>

<h3 id="prerequisites-1">Prerequisites</h3>

<ul>
  <li>This procedure requires kubectl.</li>
  <li>This procedure should only be done if you have upgraded to v3.0+ and then
downgraded to your previous version.</li>
</ul>

<h3 id="deleting-calico-data-from-the-kubernetes-api-datastore">Deleting Calico data from the Kubernetes API datastore</h3>

<ol>
  <li>
    <p>Check that the data exists in the Kubernetes API datastore. Issue the
following.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get crd
</code></pre></div>    </div>
  </li>
  <li>Verify the output contains lines with the following:
    <ul>
      <li><code class="highlighter-rouge">bgpconfigurations.crd.projectcalico.org</code></li>
      <li><code class="highlighter-rouge">felixconfigurations.crd.projectcalico.org</code></li>
      <li><code class="highlighter-rouge">clusterinformations.crd.projectcalico.org</code></li>
      <li><code class="highlighter-rouge">networkpolicies.crd.projectcalico.org</code></li>
    </ul>
  </li>
  <li>
    <p>Issue the following commands to delete the Calico data.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl delete crd bgpconfigurations.crd.projectcalico.org
kubectl delete crd felixconfigurations.crd.projectcalico.org
kubectl delete crd clusterinformations.crd.projectcalico.org
kubectl delete crd networkpolicies.crd.projectcalico.org
</code></pre></div>    </div>

    <p>It returns the number of keys it deleted.</p>
  </li>
  <li>
    <p>Issue the following command to confirm that the Calico data was deleted.
Verify the output does not contain the <code class="highlighter-rouge">crd</code>s deleted above.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get crd
</code></pre></div>    </div>
  </li>
  <li>Congratulations! You’ve cleaned Calico’s Kubernetes API
datastore.</li>
</ol>

<h3 id="next-steps-1">Next steps</h3>

<p>Return to <a href="upgrade#upgrading-a-self-hosted-installation-that-uses-the-kubernetes-api-datastore">Upgrading a self-hosted installation that uses the Kubernetes API
datastore</a>
to try again.</p>

              
              <!-- BOTTOM DOCUMENTATION PAGE NAVBAR -->
              <div style="margin-top: 60px; margin-bottom: 40px; padding-top: 20px; border-top: 1px solid #999; text-align: left; color: #999;">Rate this Page: <div class="rw-ui-container" style="margin-top: -5px;"></div> <a href="https://www.projectcalico.org/contact?type=docs&file=v3.0/getting-started/kubernetes/upgrade/delete.md" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i> Provide Feedback</a> <a href="https://www.projectcalico.org/community#slack" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-slack" aria-hidden="true"></i> Get Help via Slack</a> <a href="https://www.projectcalico.org/mvp" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-trophy" aria-hidden="true"></i> Ask our MVPs</a> <a href="https:/tigera.io/training" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Training</a></div>
              <!-- END BOTTOM DOCUMENTATION PAGE NAVBAR -->
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Start Visual Website Optimizer Asynchronous Code -->
    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=287573,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=false,
      /* DO NOT EDIT BELOW THIS LINE */
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>
    <!-- End Visual Website Optimizer Asynchronous Code -->
    <!-- DOCUMENTATION RATING ANALYTICS -->
   <script type="text/javascript">(function(d, t, e, m){
    // Async Rating-Widget initialization.
    window.RW_Async_Init = function(){
        RW.init({
            huid: "368439",
            uid: "33da22c0dff384767b5074aaf10ebc50",
            source: "website",
            options: {
                "advanced": {
					"font": {
						"color": "#999999"
					},
                    "layout": {
                        "align": {
                            "hor": "left"
                        }
                    },
                    "text": {
                        "rateThis": "Rate this"
                    }
                },
				"label": {
					"background": "#FFFFFF"
				},
				"reVote": true,
				"showInfo": false,
				/*"showTooltip": false,*/
				"hideRecommendations": false,
				"showReport": false,
				"showLoader": false,
                "style": "oxygen",
                "isDummy": false
            } 
        });
        RW.render();
    };
        // Append Rating-Widget JavaScript library.
    var rw, s = d.getElementsByTagName(e)[0], id = "rw-js",
        l = d.location, ck = "Y" + t.getFullYear() + 
        "M" + t.getMonth() + "D" + t.getDate(), p = l.protocol,
        f = ((l.search.indexOf("DBG=") > -1) ? "" : ".min"),
        a = ("https:" == p ? "secure." + m + "js/" : "js." + m);
    if (d.getElementById(id)) return;              
    rw = d.createElement(e);
    rw.id = id; rw.async = true; rw.type = "text/javascript";
    rw.src = p + "//" + a + "external" + f + ".js?ck=" + ck;
    s.parentNode.insertBefore(rw, s);
    }(document, new Date(), "script", "rating-widget.com/"));</script>
    <!-- END DOCUMENTATION RATING ANALYTICS -->
  </body>
</html>
