<!-- Set this_pages_navbar  -->












<!Doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/plugins/offcanvas.css"/>
    <link href="https://www.projectcalico.org/wp-content/themes/dante/css/font-awesome.min.css" rel="stylesheet">
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <script src="/js/script.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52125893-4', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Ubuntu Packaged Install Instructions</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="Ubuntu Packaged Install Instructions" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://docs.projectcalico.org/v2.6/getting-started/openstack/installation/ubuntu" />
<meta property="og:url" content="https://docs.projectcalico.org/v2.6/getting-started/openstack/installation/ubuntu" />
<script type="application/ld+json">
{"headline":"Ubuntu Packaged Install Instructions","@type":"WebPage","url":"https://docs.projectcalico.org/v2.6/getting-started/openstack/installation/ubuntu","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <section>
      <nav id="toplevel-nav" class="navbar navbar-default navbar-static-top">
        <div class="container">
          <div class="navbar-header">
            <!-- Hamburger menu for mobile -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#tigera-navbar" aria-expanded="false" aria-controls="tigera-navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <!-- Left brand image -->
            <a class="navbar-brand" href="https://projectcalico.org/">
              <img alt="Brand" src="/images/brand.png">
            </a>
          </div>
          <div id="tigera-navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://projectcalico.org">Home</a></li>
              <li class="active"><a href="https://projectcalico.org/resources"><span>Resources</span></a>
                <ul>
                    <li><a href="/latest/getting-started/"><i class="fa fa-tachometer" aria-hidden="true"></i> &nbsp; Getting Started</a></li>
                    <li><a href=""><i class="fa fa-book" aria-hidden="true"></i> &nbsp; Documentation</a></li>
                    <!--<li><a href="https://www.projectcalico.org/tutorials"><i class="fa fa-file-code-o" aria-hidden="true"></i> &nbsp; Tutorials &amp; Examples</a></li>
                    <li><a href=""><i class="fa fa-paper-plane-o" aria-hidden="true"></i> &nbsp; Online Workshops</a></li>-->
                    <li><a href="https://www.projectcalico.org/videos"><i class="fa fa-video-camera" aria-hidden="true"></i> &nbsp; Videos &amp; Webinars</a></li>
                    <li><a href="https://www.projectcalico.org/training"><i class="fa fa-graduation-cap" aria-hidden="true"></i> &nbsp; Training</a></li>
                    <li><a href="/latest/releases/"><i class="fa fa-clock-o" aria-hidden="true"></i> &nbsp; Releases</a></li>
                    <!-- <li><a href="/mvp"><i class="fa fa-star" aria-hidden="true"></i> &nbsp; MVP Program</a></li> -->
                    <li><a href="https://www.projectcalico.org/blog"><i class="fa fa-bookmark" aria-hidden="true"></i> &nbsp; Blog</a></li>
                </ul>
              </li>
              <li><a href="https://www.projectcalico.org/community">Community</a>
                <ul>
                    <li><a href="https://slack.projectcalico.org/"><i class="fa fa-slack" aria-hidden="true"></i> &nbsp; Slack</a></li>
                    <!--<li><a href="https://stackoverflow.com/questions/tagged/project-calico" target="_blank"><i class="fa fa-stack-overflow" aria-hidden="true"></i> &nbsp; StackOverflow</a></li>-->
                    <li><a href="https://www.projectcalico.org/mvp"><i class="fa fa-star" aria-hidden="true"></i> &nbsp; MVP Program</a></li>
                    <li><a href="https://www.projectcalico.org/community#events"><i class="fa fa-calendar" aria-hidden="true"></i> &nbsp; Upcoming Events</a></li>
                    <li><a href="https://www.projectcalico.org/newsletters"><i class="fa fa-envelope-o" aria-hidden="true"></i> &nbsp; Newsletter</a></li>
                    <li><a href="https://github.com/projectcalico" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> &nbsp; GitHub</a></li> 
                    <li><a href="https://www.projectcalico.org/jobs"><i class="fa fa-briefcase" aria-hidden="true"></i> &nbsp; Jobs</a></li>
                    <li><a href="https://www.projectcalico.org/blog"><i class="fa fa-bookmark" aria-hidden="true"></i> &nbsp; Blog</a></li>
                </ul>
              </li>
              <li><a href="https://www.projectcalico.org/mvp" style="font-weight: bold;">MVP</a></li>
              <li><a href="https://www.projectcalico.org/support">Support</a></li>
              <li class="hidden-xs"><a href="https://www.projectcalico.org/support">
                <img class="desktopImage" width="30" align="absmiddle" src="https://www.projectcalico.org/images/tigera_trans_sm.png" alt="Tigera"></a>
              </li>
            </ul>
            <form class="navbar-form visible-xs">
              <ul class="nav navbar-nav navbar-right">
                
                  <li >
                    <a href="/v2.2/introduction">Introduction</a>
                  </li>
                
                  <li  class="active">
                    <a href="/v2.2/getting-started">Getting Started</a>
                  </li>
                
                  <li >
                    <a href="/v2.2/usage">Usage</a>
                  </li>
                
                  <li >
                    <a href="/v2.2/reference">Reference</a>
                  </li>
                
                  <li >
                    <a href="/v2.2/releases">Releases</a>
                  </li>
                
              </ul>
            </form>
            <ul class="visible-xs nav navbar-nav navbar-right">
             <li class="dropdown">
               <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Version (v2.2)<span class="caret"></span></a>
               <ul class="dropdown-menu">
                 <li><a href="/v2.6/introduction">v2.6 (latest)</a></li>
                 <li><a href="/v2.5/introduction">v2.5</a></li>
                 <li><a href="/v2.4/introduction">v2.4</a></li>
                 <li><a href="/v2.3/introduction">v2.3</a></li>
                 <li><a href="/v2.2/introduction">v2.2</a></li>
                 <li><a href="/v2.1/introduction">v2.1</a></li>
                 <li><a href="/v2.0/introduction">v2.0</a></li>
                 <li><a href="/v1.6/introduction">v1.6</a></li>
                 <li><a href="/v1.5/introduction">v1.5</a></li>
                 <li><a href="/v3.0/introduction">v3.0 (beta)</a></li>
                 <li><a href="/master/introduction">nightly</a></li>
                 <li role="separator" class="divider"></li>
               </ul>
             </li>
           </ul>
          </div>
        </div>
        <div id="navbar" class="navbar-inverse navbar-collapse collapse">
          <div class="container">
            <ul class="nav navbar-nav">
              
                <li>
                  <a href="/v2.2/introduction"><span>Introduction</span></a>
                </li>
              
                <li class="active">
                  <a href="/v2.2/getting-started"><span>Getting Started</span></a>
                </li>
              
                <li>
                  <a href="/v2.2/usage"><span>Usage</span></a>
                </li>
              
                <li>
                  <a href="/v2.2/reference"><span>Reference</span></a>
                </li>
              
                <li>
                  <a href="/v2.2/releases"><span>Releases</span></a>
                </li>
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Version (v2.2)<span class="caret"></span></a>
                <ul class="dropdown-menu">
                   <li><a href="/v3.0/introduction">v3.0 (latest)</a></li>
                   <li><a href="/v2.6/introduction">v2.6</a></li>
                   <li><a href="/v2.5/introduction">v2.5</a></li>
                   <li><a href="/v2.4/introduction">v2.4</a></li>
                   <li><a href="/v2.3/introduction">v2.3</a></li>
                   <li><a href="/v2.2/introduction">v2.2</a></li>
                   <li><a href="/v2.1/introduction">v2.1</a></li>
                   <li><a href="/v2.0/introduction">v2.0</a></li>
                   <li><a href="/v1.6/introduction">v1.6</a></li>
                   <li><a href="/v1.5/introduction">v1.5</a></li>
                  <li role="separator" class="divider"></li>
                  <li><a href="/master/introduction">nightly</a></li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="row">
            <div class="col-sm-0"></div>
          </div>
        </div>
      </nav>
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-left">
          <p class="pull-left visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          <div class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
            <div class="row">
              <script>
                (function() {
                  var cx = '015028447179048192876:xjzskk7awwe';
                  var gcse = document.createElement('script');
                  gcse.type = 'text/javascript';
                  gcse.async = true;
                  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                  var s = document.getElementsByTagName('script')[0];
                  s.parentNode.insertBefore(gcse, s);
                })();
              </script>
              <gcse:search></gcse:search>
            </div>
            <div id="sidebar">
            	

  
    
    
    <div class="link">
      <a class="item" data-title="Getting Started with Calico" href="/v2.2/getting-started/">
        Getting Started with Calico
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes" aria-expanded="false" aria-controls="nav-kubernetes">
          Kubernetes
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/kubernetes/">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-installation" aria-expanded="false" aria-controls="nav-kubernetes-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Introduction" href="/v2.2/getting-started/kubernetes/installation/">
        Introduction
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-installation-hosted-viakubectl" aria-expanded="false" aria-controls="nav-kubernetes-installation-hosted-viakubectl">
          Hosted (via kubectl)
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-installation-hosted-viakubectl">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Introduction" href="/v2.2/getting-started/kubernetes/installation/hosted/">
        Introduction
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Standard Hosted Install" href="/v2.2/getting-started/kubernetes/installation/hosted/hosted">
        Standard Hosted Install
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Kubeadm Hosted Install" href="/v2.2/getting-started/kubernetes/installation/hosted/kubeadm/">
        Kubeadm Hosted Install
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Kubernetes Datastore Hosted Install" href="/v2.2/getting-started/kubernetes/installation/hosted/kubernetes-datastore/">
        Kubernetes Datastore Hosted Install
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Integration Guide" href="/v2.2/getting-started/kubernetes/installation/integration">
        Integration Guide
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="AWS" href="/v2.2/getting-started/kubernetes/installation/aws">
        AWS
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="GCE" href="/v2.2/getting-started/kubernetes/installation/gce">
        GCE
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Vagrant/VirtualBox: CoreOS" href="/v2.2/getting-started/kubernetes/installation/vagrant/">
        Vagrant/VirtualBox: CoreOS
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-kubernetes-tutorials" aria-expanded="false" aria-controls="nav-kubernetes-tutorials">
          Tutorials
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-kubernetes-tutorials">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Using calicoctl" href="/v2.2/getting-started/kubernetes/tutorials/using-calicoctl">
        Using calicoctl
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Simple Policy Demo" href="/v2.2/getting-started/kubernetes/tutorials/simple-policy">
        Simple Policy Demo
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Stars Policy Demo" href="/v2.2/getting-started/kubernetes/tutorials/stars-policy/">
        Stars Policy Demo
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Advanced network policy" href="/v2.2/getting-started/kubernetes/tutorials/advanced-policy">
        Advanced network policy
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Troubleshooting / FAQ" href="/v2.2/getting-started/kubernetes/troubleshooting">
        Troubleshooting / FAQ
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Upgrade" href="/v2.2/getting-started/kubernetes/upgrade">
        Upgrade
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-mesos" aria-expanded="false" aria-controls="nav-mesos">
          Mesos
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-mesos">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/mesos/">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-mesos-installation" aria-expanded="false" aria-controls="nav-mesos-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-mesos-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Requirements" href="/v2.2/getting-started/mesos/installation/prerequisites">
        Requirements
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Integration Guide" href="/v2.2/getting-started/mesos/installation/integration">
        Integration Guide
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-mesos-installation-dcos" aria-expanded="false" aria-controls="nav-mesos-installation-dcos">
          DC/OS
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-mesos-installation-dcos">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/mesos/installation/dc-os/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Universe Package Install" href="/v2.2/getting-started/mesos/installation/dc-os/framework">
        Universe Package Install
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Customize Universe Package Install" href="/v2.2/getting-started/mesos/installation/dc-os/custom">
        Customize Universe Package Install
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-mesos-tutorials" aria-expanded="false" aria-controls="nav-mesos-tutorials">
          Tutorials
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-mesos-tutorials">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Launching Tasks" href="/v2.2/getting-started/mesos/tutorials/launching-tasks">
        Launching Tasks
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Connecting to Tasks" href="/v2.2/getting-started/mesos/tutorials/connecting-tasks">
        Connecting to Tasks
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-mesos-tutorials-configuringpolicy" aria-expanded="false" aria-controls="nav-mesos-tutorials-configuringpolicy">
          Configuring Policy
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-mesos-tutorials-configuringpolicy">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Universal Containerizer" href="/v2.2/getting-started/mesos/tutorials/policy/universal-containerizer">
        Universal Containerizer
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Docker Containerizer" href="/v2.2/getting-started/mesos/tutorials/policy/docker-containerizer">
        Docker Containerizer
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-mesos-demos" aria-expanded="false" aria-controls="nav-mesos-demos">
          Demos
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-mesos-demos">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Vagrant Quickstart - Docker Containerizer" href="/v2.2/getting-started/mesos/vagrant/">
        Vagrant Quickstart - Docker Containerizer
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-docker" aria-expanded="false" aria-controls="nav-docker">
          Docker
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-docker">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/docker/">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-docker-installation" aria-expanded="false" aria-controls="nav-docker-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-docker-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Requirements" href="/v2.2/getting-started/docker/installation/requirements">
        Requirements
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Manual" href="/v2.2/getting-started/docker/installation/manual">
        Manual
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Vagrant/VirtualBox: CoreOS" href="/v2.2/getting-started/docker/installation/vagrant-coreos/">
        Vagrant/VirtualBox: CoreOS
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Vagrant/VirtualBox: Ubuntu" href="/v2.2/getting-started/docker/installation/vagrant-ubuntu/">
        Vagrant/VirtualBox: Ubuntu
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-docker-tutorials" aria-expanded="false" aria-controls="nav-docker-tutorials">
          Tutorials
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-docker-tutorials">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Security using Calico Profiles" href="/v2.2/getting-started/docker/tutorials/security-using-calico-profiles">
        Security using Calico Profiles
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Security using Calico Profiles and Policy" href="/v2.2/getting-started/docker/tutorials/security-using-calico-profiles-and-policy">
        Security using Calico Profiles and Policy
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Security using Docker Labels and Calico Policy" href="/v2.2/getting-started/docker/tutorials/security-using-docker-labels-and-calico-policy">
        Security using Docker Labels and Calico Policy
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="IPAM" href="/v2.2/getting-started/docker/tutorials/ipam">
        IPAM
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-openstack" aria-expanded="false" aria-controls="nav-openstack">
          OpenStack
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-openstack">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/openstack/">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-openstack-installation" aria-expanded="false" aria-controls="nav-openstack-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-openstack-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/openstack/installation/">
        Overview
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Ubuntu" href="/v2.2/getting-started/openstack/installation/ubuntu">
        Ubuntu
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Red Hat Enterprise Linux 7" href="/v2.2/getting-started/openstack/installation/redhat">
        Red Hat Enterprise Linux 7
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Juju Charms" href="/v2.2/getting-started/openstack/installation/juju">
        Juju Charms
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Fuel" href="/v2.2/getting-started/openstack/installation/fuel">
        Fuel
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="DevStack" href="/v2.2/getting-started/openstack/installation/devstack">
        DevStack
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Chef" href="/v2.2/getting-started/openstack/installation/chef">
        Chef
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Upgrade" href="/v2.2/getting-started/openstack/upgrade">
        Upgrade
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Tutorials" href="/v2.2/getting-started/openstack/tutorials">
        Tutorials
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Troubleshooting" href="/v2.2/getting-started/openstack/verification">
        Troubleshooting
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="IP Addressing and Connectivity" href="/v2.2/getting-started/openstack/connectivity">
        IP Addressing and Connectivity
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Use of the Neutron API" href="/v2.2/getting-started/openstack/neutron-api">
        Use of the Neutron API
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-rkt" aria-expanded="false" aria-controls="nav-rkt">
          rkt
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-rkt">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/rkt/">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-rkt-installation" aria-expanded="false" aria-controls="nav-rkt-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-rkt-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Manual Installation" href="/v2.2/getting-started/rkt/installation/manual">
        Manual Installation
      </a>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Vagrant/VirtualBox: CoreOS" href="/v2.2/getting-started/rkt/installation/vagrant-coreos/">
        Vagrant/VirtualBox: CoreOS
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-rkt-tutorials" aria-expanded="false" aria-controls="nav-rkt-tutorials">
          Tutorials
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-rkt-tutorials">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Basic Network Isolation" href="/v2.2/getting-started/rkt/tutorials/basic">
        Basic Network Isolation
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    
    <div class="link">
      <a class="item" data-title="Troubleshooting" href="/v2.2/getting-started/rkt/troubleshooting">
        Troubleshooting
      </a>
    </div>
  


        </div>
      </div>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-hostprotection" aria-expanded="false" aria-controls="nav-hostprotection">
          Host Protection
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-hostprotection">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Overview" href="/v2.2/getting-started/bare-metal/bare-metal">
        Overview
      </a>
    </div>
  

  
    
    <div>
      <div class="link">
        <span class="glyphicon glyphicon-chevron-right navbar-arrow"></span>
        <a role="button" data-toggle="collapse" href="#nav-hostprotection-installation" aria-expanded="false" aria-controls="nav-hostprotection-installation">
          Installation
        </a>
      </div>
      <div class="section">
        <div class="collapse" id="nav-hostprotection-installation">
          

  
    
    
    <div class="link">
      <a class="item" data-title="Installing Felix as a static binary" href="/v2.2/getting-started/bare-metal/bare-metal-install">
        Installing Felix as a static binary
      </a>
    </div>
  


        </div>
      </div>
    </div>
  


        </div>
      </div>
    </div>
  


			</div>
          </div>
          <div class="col-xs-12 col-sm-8 col-md-9">
            <div id="content-main">
              <!-- TOP DOCUMENTATION PAGE NAVBAR -->
              <div style="text-align: left; padding: 18px 0 9px 0; min-width: 500px; overflow-x: hidden;">
              
              <a data-proofer-ignore href="https://github.com/projectcalico/calico/tree/master/v2.2/getting-started/openstack/installation/ubuntu.md" style="color: #999; text-decoration: none; float: right;" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit this page</a></div>
              <!-- END TOP DOCUMENTATION PAGE NAVBAR -->
              
  <div class="alert alert-warning" role="alert">
    <strong>Warning:</strong> You are viewing the v2.2 docs. <a href="/latest">Click here to view the docs for the latest release.</a>
  </div>


              <h1>Ubuntu Packaged Install Instructions</h1>
              <p>For this version of Calico, with OpenStack on Ubuntu Trusty or Xenial, we
recommend using OpenStack Liberty or later; Kilo is also known to work on
Ubuntu Trusty.</p>

<p>These instructions will take you through a first-time install of Calico using
the latest packages on a system running Ubuntu 14.04 (Trusty) or 16.04
(Xenial), with OpenStack Kilo, Liberty or Mitaka. If you are upgrading an
existing system, please see <a href="/v2.2/getting-started/openstack/upgrade">this
document</a>
instead for upgrade instructions.</p>

<p>There are three sections to the install: installing etcd, upgrading
control nodes to use Calico, and upgrading compute nodes to use Calico.
The <strong>Common Steps</strong> must be followed on each node before moving onto
the specific instructions in those sections.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before starting this you will need the following:</p>

<ul>
  <li>One or more machines running Ubuntu (these will be installed
as your OpenStack compute or control nodes).</li>
  <li>SSH access to these machines.</li>
</ul>

<h2 id="common-steps">Common Steps</h2>

<p>Some steps need to be taken on all machines being installed with Calico.
These steps are detailed in this section.</p>

<h3 id="install-openstack">Install OpenStack</h3>

<p>If you haven’t already done so, you should install OpenStack with
Neutron and ML2 networking. Instructions for installing OpenStack can be
found at <a href="http://docs.openstack.org">http://docs.openstack.org</a>.</p>

<h3 id="configuring-apt-software-sources">Configuring APT software sources</h3>

<p>Configure APT to use the Calico PPA:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>add-apt-repository ppa:project-calico/calico-2.2
</code></pre></div></div>

<p>With Kilo, Calico also needs patched versions of Nova and Neutron that are
provided by our ‘kilo’ PPA.  So if you are using Kilo:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>add-apt-repository ppa:project-calico/kilo
</code></pre></div></div>

<p>and also edit <code class="highlighter-rouge">/etc/apt/preferences</code> to add the following lines, whose effect
is to prefer the Calico-provided packages for Nova and Neutron even if later
versions of those packages are released by Ubuntu.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Package: *
    Pin: release o=LP-PPA-project-calico-*
    Pin-Priority: 1001
</code></pre></div></div>

<h3 id="common">Common</h3>

<p>You will also need to add the official <a href="http://bird.network.cz/">BIRD</a>
PPA. This PPA contains fixes to BIRD that are not yet available in Ubuntu. To
add the PPA, run:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>add-apt-repository ppa:cz.nic-labs/bird
</code></pre></div></div>

<p>Once that’s done, update your package manager on each machine:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>apt-get update
</code></pre></div></div>

<h2 id="etcd-install">Etcd Install</h2>

<p>Calico requires an etcd database to operate – this may be installed on
a single machine or as a cluster.</p>

<p>These instructions cover installing a single node etcd database. You may
wish to co-locate this with your control node. If you want to install a
cluster, please get in touch with us and we’ll be happy to help you
through the process.</p>

<ol>
  <li>
    <p>Install the <code class="highlighter-rouge">etcd</code> packages:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>etcd python-etcd
</code></pre></div>    </div>
  </li>
  <li>
    <p>Stop the etcd service: :</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service etcd stop
</code></pre></div>    </div>
  </li>
  <li>
    <p>Delete any existing etcd database: :</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/lib/etcd/<span class="k">*</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Mount a RAM disk at /var/lib/etcd: :</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>mount <span class="nt">-t</span> tmpfs <span class="nt">-o</span> <span class="nv">size</span><span class="o">=</span>512m tmpfs /var/lib/etcd
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add the following to the bottom of <code class="highlighter-rouge">/etc/fstab</code> so that the RAM disk
gets reinstated at boot time:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    tmpfs /var/lib/etcd tmpfs nodev,nosuid,noexec,nodiratime,size<span class="o">=</span>512M 0 0
</code></pre></div>    </div>
  </li>
  <li>Edit <code class="highlighter-rouge">/etc/init/etcd.conf</code>:
    <ul>
      <li>
        <p>Find the line which begins <code class="highlighter-rouge">exec /usr/bin/etcd</code> and edit it,
substituting for <code class="highlighter-rouge">&lt;controller_fqdn&gt;</code> and
<code class="highlighter-rouge">&lt;controller_ip&gt;</code> appropriately.</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">exec</span> /usr/bin/etcd <span class="nt">--name</span><span class="o">=</span><span class="s2">"&lt;controller_fqdn&gt;"</span>  <span class="se">\</span>
                       <span class="nt">--advertise-client-urls</span><span class="o">=</span><span class="s2">"http://&lt;controller_ip&gt;:2379,http://&lt;controller_ip&gt;:4001"</span>  <span class="se">\</span>
                       <span class="nt">--listen-client-urls</span><span class="o">=</span><span class="s2">"http://0.0.0.0:2379,http://0.0.0.0:4001"</span>  <span class="se">\</span>
                       <span class="nt">--listen-peer-urls</span> <span class="s2">"http://0.0.0.0:2380"</span>  <span class="se">\</span>
                       <span class="nt">--initial-advertise-peer-urls</span> <span class="s2">"http://&lt;controller_ip&gt;:2380"</span>  <span class="se">\</span>
                       <span class="nt">--initial-cluster-token</span> <span class="k">$(</span>uuidgen<span class="k">)</span>  <span class="se">\</span>
                       <span class="nt">--initial-cluster</span> <span class="s2">"&lt;controller_fqdn&gt;=http://&lt;controller_ip&gt;:2380"</span>  <span class="se">\</span>
                       <span class="nt">--initial-cluster-state</span> <span class="s2">"new"</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Start the etcd service: :</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service etcd start
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="etcd-proxy-install">Etcd Proxy Install</h2>

<p>Install an etcd proxy on every node running OpenStack services that
isn’t running the etcd database itself (both control and compute nodes).</p>

<ol>
  <li>
    <p>Install the <code class="highlighter-rouge">etcd</code> and <code class="highlighter-rouge">python-etcd</code> packages:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>etcd python-etcd
</code></pre></div>    </div>
  </li>
  <li>
    <p>Stop the etcd service: :</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service etcd stop
</code></pre></div>    </div>
  </li>
  <li>
    <p>Delete any existing etcd database: :</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/lib/etcd/<span class="k">*</span>
</code></pre></div>    </div>
  </li>
  <li>Edit <code class="highlighter-rouge">/etc/init/etcd.conf</code>:
    <ul>
      <li>
        <p>Find the line which begins <code class="highlighter-rouge">exec /usr/bin/etcd</code> and edit it,
substituting for <code class="highlighter-rouge">&lt;etcd_fqdn&gt;</code> and <code class="highlighter-rouge">&lt;etcd_ip&gt;</code> appropriately:</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">exec</span> /usr/bin/etcd <span class="nt">--proxy</span> on                                             <span class="se">\</span>
                       <span class="nt">--initial-cluster</span> <span class="s2">"&lt;etcd_fqdn&gt;=http://&lt;etcd_ip&gt;:2380"</span>  <span class="se">\</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Start the etcd service:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service etcd start
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="control-node-install">Control Node Install</h2>

<p>On each control node ensure etcd or an etcd proxy is installed, and then
perform the following steps:</p>

<ol>
  <li>
    <p>Run <code class="highlighter-rouge">apt-get upgrade</code> and <code class="highlighter-rouge">apt-get dist-upgrade</code>. These commands
will bring in Calico-specific updates to the OpenStack packages and
to <code class="highlighter-rouge">dnsmasq</code>. (OpenStack updates are not needed for Liberty.)</p>
  </li>
  <li>
    <p>Install the <code class="highlighter-rouge">calico-control</code> package:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>calico-control
</code></pre></div>    </div>
  </li>
  <li>Edit the <code class="highlighter-rouge">/etc/neutron/neutron.conf</code> file. In the [DEFAULT]
section:
    <ul>
      <li>Find the line beginning with <code class="highlighter-rouge">core_plugin</code>, and change it to
read <code class="highlighter-rouge">core_plugin = calico</code>.</li>
    </ul>
  </li>
  <li>With OpenStack releases earlier than Liberty, edit the
<code class="highlighter-rouge">/etc/neutron/neutron.conf</code> file. In the [DEFAULT] section:
    <ul>
      <li>Find the line for the <code class="highlighter-rouge">dhcp_agents_per_network</code> setting,
uncomment it, and set its value to the number of compute nodes
that you will have (or any number larger than that). This allows
a DHCP agent to run on every compute node, which Calico requires
because the networks on different compute nodes are not
bridged together.</li>
    </ul>
  </li>
  <li>
    <p>Restart the Neutron server process:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service neutron-server restart
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="compute-node-install">Compute Node Install</h2>

<p>On each compute node ensure etcd or an etcd proxy is installed, and then
perform the following steps:</p>

<ol>
  <li>
    <p>Make the changes to SELinux and QEMU config that are described in
<a href="https://web.archive.org/web/20160226213437/http://wiki.libvirt.org/page/Guest_won't_start_-_warning:_could_not_open_/dev/net/tun_('generic_ethernet'_interface)">this libvirt Wiki page</a>,
to allow VM interfaces with <code class="highlighter-rouge">type='ethernet'</code>.</p>

    <p>Disable SELinux if it’s running. SELinux isn’t installed by default
on Ubuntu – you can check its status by running <code class="highlighter-rouge">sestatus</code>. If this
is installed and the current mode is <code class="highlighter-rouge">enforcing</code>, then disable it by
running <code class="highlighter-rouge">setenforce permissive</code> and setting <code class="highlighter-rouge">SELINUX=permissive</code> in
<code class="highlighter-rouge">/etc/selinux/config</code>.</p>

    <p>In <code class="highlighter-rouge">/etc/libvirt/qemu.conf</code>, add or edit the following four options
(in particular note the <code class="highlighter-rouge">/dev/net/tun</code> in <code class="highlighter-rouge">cgroup_device_acl</code>):</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    clear_emulator_capabilities <span class="o">=</span> 0
    user <span class="o">=</span> <span class="s2">"root"</span>
    group <span class="o">=</span> <span class="s2">"root"</span>
    cgroup_device_acl <span class="o">=</span> <span class="o">[</span>
         <span class="s2">"/dev/null"</span>, <span class="s2">"/dev/full"</span>, <span class="s2">"/dev/zero"</span>,
         <span class="s2">"/dev/random"</span>, <span class="s2">"/dev/urandom"</span>,
         <span class="s2">"/dev/ptmx"</span>, <span class="s2">"/dev/kvm"</span>, <span class="s2">"/dev/kqemu"</span>,
         <span class="s2">"/dev/rtc"</span>, <span class="s2">"/dev/hpet"</span>, <span class="s2">"/dev/net/tun"</span>,
    <span class="o">]</span>
</code></pre></div>    </div>

    <p>Then restart libvirt to pick up the changes:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service libvirt-bin restart
</code></pre></div>    </div>
  </li>
  <li>
    <p>Open <code class="highlighter-rouge">/etc/nova/nova.conf</code> and remove the line from the [DEFAULT]
section that reads:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    linuxnet_interface_driver <span class="o">=</span> nova.network.linux_net.LinuxOVSInterfaceDriver
</code></pre></div>    </div>

    <p>Remove the lines from the [neutron] section setting
<code class="highlighter-rouge">service_neutron_metadata_proxy</code> or <code class="highlighter-rouge">service_metadata_proxy</code> to
<code class="highlighter-rouge">True</code>, if there are any.</p>

    <p>Restart nova compute.</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service nova-compute restart
</code></pre></div>    </div>
  </li>
  <li>
    <p>If they’re running, stop the Open vSwitch services:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service openvswitch-switch stop
    <span class="nv">$ </span><span class="nb">sudo </span>service neutron-plugin-openvswitch-agent stop
</code></pre></div>    </div>

    <p>Then, prevent the services running if you reboot:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s2">"echo 'manual' &gt; /etc/init/openvswitch-switch.override"</span>
    <span class="nv">$ </span><span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s2">"echo 'manual' &gt; /etc/init/openvswitch-force-reload-kmod.override"</span>
    <span class="nv">$ </span><span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s2">"echo 'manual' &gt; /etc/init/neutron-plugin-openvswitch-agent.override"</span>
</code></pre></div>    </div>

    <p>Then, on your control node, run the following command to find the
agents that you just stopped:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    neutron agent-list
</code></pre></div>    </div>

    <p>For each agent, delete them with the following command on your
control node, replacing <code class="highlighter-rouge">&lt;agent-id&gt;</code> with the ID of the agent:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    neutron agent-delete &lt;agent-id&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Install some extra packages:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>neutron-common neutron-dhcp-agent nova-api-metadata
</code></pre></div>    </div>
  </li>
  <li>
    <p>Run <code class="highlighter-rouge">apt-get upgrade</code> and <code class="highlighter-rouge">apt-get dist-upgrade</code>. These commands
will bring in Calico-specific updates to the OpenStack packages and
to <code class="highlighter-rouge">dnsmasq</code>. For OpenStack Liberty, this step only upgrades
<code class="highlighter-rouge">dnsmasq</code>.</p>

    <blockquote>
      <p><strong>WARNING</strong></p>

      <p>Check the version of libvirt-bin that is installed using
<code class="highlighter-rouge">dpkg -s libvirt-bin</code>. For Kilo, the version of libvirt-bin
should be at least <code class="highlighter-rouge">1.2.12-0ubuntu13</code>. This will become part
of the standard Ubuntu Kilo repository, but at the time of
writing needs to be installed as follows:</p>

      <p><code class="highlighter-rouge">shell
     $ sudo add-apt-repository cloud-archive:kilo-proposed
     $ sudo apt-get update
     $ sudo apt-get upgrade
   </code></p>
    </blockquote>
  </li>
  <li>
    <p>If you’re using OpenStack Kilo, open <code class="highlighter-rouge">/etc/neutron/dhcp_agent.ini</code> in your
preferred text editor, and set the following in the <code class="highlighter-rouge">[DEFAULT]</code> section:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    interface_driver <span class="o">=</span> neutron.agent.linux.interface.RoutedInterfaceDriver
</code></pre></div>    </div>

    <p>and then restart the DHCP agent:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service neutron-dhcp-agent restart
</code></pre></div>    </div>

    <p>For OpenStack Liberty and later, install the Calico DHCP agent
(which uses etcd, allowing it to scale to higher numbers of hosts)
and disable the Neutron-provided one:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>service neutron-dhcp-agent stop
    <span class="nv">$ </span><span class="nb">echo </span>manual | <span class="nb">sudo tee</span> /etc/init/neutron-dhcp-agent.override
    <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>calico-dhcp-agent
</code></pre></div>    </div>
  </li>
  <li>
    <p>Install the <code class="highlighter-rouge">calico-compute</code> package:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>calico-compute
</code></pre></div>    </div>

    <p>This step may prompt you to save your IPTables rules to make them
persistent on restart – hit yes.</p>
  </li>
  <li>
    <p>Configure BIRD. By default Calico assumes that you’ll be deploying a
route reflector to avoid the need for a full BGP mesh. To this end,
it includes useful configuration scripts that will prepare a BIRD
config file with a single peering to the route reflector. If that’s
correct for your network, you can run either or both of the
following commands.</p>

    <p>For IPv4 connectivity between compute hosts:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>calico-gen-bird-conf.sh &lt;compute_node_ip&gt; &lt;route_reflector_ip&gt; &lt;bgp_as_number&gt;
</code></pre></div>    </div>

    <p>And/or for IPv6 connectivity between compute hosts:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span><span class="nb">sudo </span>calico-gen-bird6-conf.sh &lt;compute_node_ipv4&gt; &lt;compute_node_ipv6&gt; &lt;route_reflector_ipv6&gt; &lt;bgp_as_number&gt;
</code></pre></div>    </div>

    <p>Note that you’ll also need to configure your route reflector to
allow connections from the compute node as a route reflector client.
If you are using BIRD as a route reflector, follow the instructions
<a href="/v2.2/usage/routereflector/bird-rr-config">here</a>. If you are using another route reflector, refer
to the appropriate instructions to configure a client connection.</p>

    <p>If you <em>are</em> configuring a full BGP mesh you’ll need to handle the
BGP configuration appropriately on each compute host. The scripts
above can be used to generate a sample configuration for BIRD, by
replacing the <code class="highlighter-rouge">&lt;route_reflector_ip&gt;</code> with the IP of one other
compute host – this will generate the configuration for a single
peer connection, which you can duplicate and update for each compute
host in your mesh.</p>

    <p>To maintain connectivity between VMs if BIRD crashes or is upgraded,
configure BIRD graceful restart:</p>

    <ul>
      <li>Add -R to BIRD_ARGS in /etc/bird/envvars (you may need to
uncomment this option).</li>
      <li>
        <p>Edit the upstart jobs /etc/init/bird.conf and bird6.conf ()if
you’re using IPv6), and add the following script to it.</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    pre-stop script
    <span class="nv">PID</span><span class="o">=</span><span class="sb">`</span>status bird | egrep <span class="nt">-oi</span> <span class="s1">'([0-9]+)$'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="sb">`</span>
    <span class="nb">kill</span> <span class="nt">-9</span> <span class="nv">$PID</span>
    end script
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Create the <code class="highlighter-rouge">/etc/calico/felix.cfg</code> file by taking a copy of the
supplied sample config at <code class="highlighter-rouge">/etc/calico/felix.cfg.example</code>.</li>
  <li>Restart the Felix service with <code class="highlighter-rouge">service calico-felix restart</code>.</li>
</ol>

              
              <!-- BOTTOM DOCUMENTATION PAGE NAVBAR -->
              <div style="margin-top: 60px; margin-bottom: 40px; padding-top: 20px; border-top: 1px solid #999; text-align: left; color: #999;">Rate this Page: <div class="rw-ui-container" style="margin-top: -5px;"></div> <a href="https://www.projectcalico.org/contact?type=docs&file=v2.2/getting-started/openstack/installation/ubuntu.md" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i> Provide Feedback</a> <a href="https://www.projectcalico.org/community#slack" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-slack" aria-hidden="true"></i> Get Help via Slack</a> <a href="https://www.projectcalico.org/mvp" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-trophy" aria-hidden="true"></i> Ask our MVPs</a> <a href="https:/tigera.io/training" style="margin-left: 30px; color: #999; text-decoration: none;" target="_blank"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Training</a></div>
              <!-- END BOTTOM DOCUMENTATION PAGE NAVBAR -->
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Start Visual Website Optimizer Asynchronous Code -->
    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=287573,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=false,
      /* DO NOT EDIT BELOW THIS LINE */
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>
    <!-- End Visual Website Optimizer Asynchronous Code -->
    <!-- DOCUMENTATION RATING ANALYTICS -->
   <script type="text/javascript">(function(d, t, e, m){
    // Async Rating-Widget initialization.
    window.RW_Async_Init = function(){
        RW.init({
            huid: "368439",
            uid: "33da22c0dff384767b5074aaf10ebc50",
            source: "website",
            options: {
                "advanced": {
					"font": {
						"color": "#999999"
					},
                    "layout": {
                        "align": {
                            "hor": "left"
                        }
                    },
                    "text": {
                        "rateThis": "Rate this"
                    }
                },
				"label": {
					"background": "#FFFFFF"
				},
				"reVote": true,
				"showInfo": false,
				/*"showTooltip": false,*/
				"hideRecommendations": false,
				"showReport": false,
				"showLoader": false,
                "style": "oxygen",
                "isDummy": false
            } 
        });
        RW.render();
    };
        // Append Rating-Widget JavaScript library.
    var rw, s = d.getElementsByTagName(e)[0], id = "rw-js",
        l = d.location, ck = "Y" + t.getFullYear() + 
        "M" + t.getMonth() + "D" + t.getDate(), p = l.protocol,
        f = ((l.search.indexOf("DBG=") > -1) ? "" : ".min"),
        a = ("https:" == p ? "secure." + m + "js/" : "js." + m);
    if (d.getElementById(id)) return;              
    rw = d.createElement(e);
    rw.id = id; rw.async = true; rw.type = "text/javascript";
    rw.src = p + "//" + a + "external" + f + ".js?ck=" + ck;
    s.parentNode.insertBefore(rw, s);
    }(document, new Date(), "script", "rating-widget.com/"));</script>
    <!-- END DOCUMENTATION RATING ANALYTICS -->
  </body>
</html>
